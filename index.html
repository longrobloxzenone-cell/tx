<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game T√†i X·ªâu Casino</title>
<style>
/* ===== Body ===== */
body {
  margin: 0;
  padding: 0;
  font-family: 'Arial', sans-serif;
  background: linear-gradient(to bottom, #8b0000, #000);
  color: #fff;
  text-align: center;
}

/* ===== Owner ===== */
#owner {
  position: fixed;
  top: 5px;
  left: 5px;
  font-weight: bold;
  font-size: 16px;
  color: #ffd700;
  text-shadow: 1px 1px 2px #000;
  z-index: 999;
}

/* ===== Panels ===== */
#loginPanel, #gamePanel {
  padding: 15px;
}
input, button {
  padding: 8px;
  margin: 4px;
  border-radius: 5px;
  border: none;
  font-size: 14px;
}
button { cursor: pointer; transition: 0.2s; }
button:hover { opacity: 0.8; }

/* ===== Wallet ===== */
#wallet {
  font-size: 16px;
  margin: 10px 0;
}
#selectedBet {
  margin: 5px 0;
  font-weight: bold;
}

/* ===== Dice ===== */
#diceArea {
  margin: 15px 0;
  display: flex;
  justify-content: center;
  gap: 10px;
}
.dice {
  width: 60px;
  height: 60px;
  background: #fff;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  color: #000;
  box-shadow: 0 3px 10px rgba(0,0,0,0.7), 0 0 3px #ffd700 inset;
  transition: transform 0.5s;
}

/* ===== Chips ===== */
#chipArea {
  margin: 10px 0;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
}
.chip {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: #fff;
  cursor: pointer;
  border: 2px solid #fff;
  font-size: 12px;
  text-shadow: 0 1px 1px rgba(0,0,0,0.5);
  transition: all 0.3s ease;
}
.chip:hover { transform: scale(1.2); border-color: #ffd700; }

/* Chip colors */
.chip[data-value="1000"] { background: linear-gradient(145deg,#4caf50,#087f23); }
.chip[data-value="5000"] { background: linear-gradient(145deg,#2196f3,#0d47a1); }
.chip[data-value="10000"] { background: linear-gradient(145deg,#ff9800,#e65100); }
.chip[data-value="50000"] { background: linear-gradient(145deg,#e91e63,#880e4f); }
.chip[data-value="1000000"] { background: linear-gradient(145deg,#ffeb3b,#fbc02d); }
.chip[data-value="2000000"] { background: linear-gradient(145deg,#ff9800,#f57c00); }
.chip[data-value="5000000"] { background: linear-gradient(145deg,#e91e63,#c2185b); }

/* ===== Effects ===== */
.flash-win { animation: flashWin 0.5s; }
.flash-lose { animation: flashLose 0.5s; }
@keyframes flashWin {
  0%{background:#121212;} 50%{background:#2e7d32;} 100%{background:#121212;}
}
@keyframes flashLose {
  0%{background:#121212;} 50%{background:#b71c1c;} 100%{background:#121212;}
}

/* ===== Admin ===== */
#adminPanel {
  margin-top: 10px;
  border-top: 1px solid #fff;
  padding-top: 5px;
  display: none;
}
textarea { width: 100%; height: 80px; font-size: 12px; }
</style>
</head>
<body>
<div id="owner">lowt</div>

<!-- ===== Login/Register ===== -->
<div id="loginPanel">
<h2>ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</h2>
<input type="text" id="username" placeholder="T√™n ƒëƒÉng nh·∫≠p">
<input type="password" id="password" placeholder="M·∫≠t kh·∫©u">
<br>
<button onclick="login()">ƒêƒÉng nh·∫≠p</button>
<button onclick="register()">ƒêƒÉng k√Ω</button>
<p id="loginMsg" style="color:yellow;"></p>
</div>

<!-- ===== Game Panel ===== -->
<div id="gamePanel" style="display:none;">
<h2>Ch√†o, <span id="userName"></span></h2>
<button onclick="logout()">ƒêƒÉng xu·∫•t</button>
<div id="wallet">V√≠: <span id="money">0</span> $</div>

<div id="diceArea">
  <div id="dice1" class="dice">üé≤</div>
  <div id="dice2" class="dice">üé≤</div>
  <div id="dice3" class="dice">üé≤</div>
</div>

<div id="result" style="font-size:16px;margin:5px;"></div>

<div id="chipArea">
  <div class="chip" data-value="1000">1K</div>
  <div class="chip" data-value="5000">5K</div>
  <div class="chip" data-value="10000">10K</div>
  <div class="chip" data-value="50000">50K</div>
  <div class="chip" data-value="1000000">1M</div>
  <div class="chip" data-value="2000000">2M</div>
  <div class="chip" data-value="5000000">5M</div>
</div>

<div id="selectedBet">C∆∞·ª£c: 0 $ | Ch·ªçn: -</div>
<button onclick="chooseBet('T√†i')">T√†i</button>
<button onclick="chooseBet('X·ªâu')">X·ªâu</button>
<button onclick="rollDice()">Quay x√∫c x·∫Øc</button>
<br>
<button onclick="claimTask()">Nh·∫≠n nhi·ªám v·ª• 30s</button>
<button onclick="enterCode()">Nh·∫≠p code</button>

<!-- Admin Panel -->
<div id="adminPanel">
<h3>Admin Panel</h3>
T·ªâ l·ªá th·∫Øng (0-1): <input type="number" id="adminWinRate" step="0.01" min="0" max="1">
<button onclick="adminSetWinRate()">C·∫≠p nh·∫≠t</button><br>
T·∫°o code: <input type="text" id="adminCode" placeholder="Code">
S·ªë ti·ªÅn: <input type="number" id="adminCodeAmount" placeholder="S·ªë ti·ªÅn">
<button onclick="adminCreateCode()">T·∫°o code</button><br>
C·ªông/tr·ª´ ti·ªÅn user: User <input type="text" id="adminTarget">
S·ªë ti·ªÅn <input type="number" id="adminAmount">
<button onclick="adminAddMoney()">C·ªông</button>
<button onclick="adminDeductMoney()">Tr·ª´</button><br>
<button onclick="adminViewLogs()">Xem log dice</button>
<textarea id="logArea" readonly></textarea>
<br>
<button onclick="showAllUsers()">Danh s√°ch user</button>
</div>

<script>
// ==== JavaScript gi·ªØ nguy√™n ====
let users = JSON.parse(localStorage.getItem("users")||"{}");
if(!users["lowt"]){
    users["lowt"] = {password:"tram1002", money:1000000, logs:[], isAdmin:true};
    localStorage.setItem("users", JSON.stringify(users));
}
let currentUser=null, selectedBetAmount=0, selectedChoice=null, winRate=0.05, taskCooldown=false, codeList={};

function login(){
    const u = document.getElementById("username").value;
    const p = document.getElementById("password").value;
    if(users[u] && users[u].password===p){
        currentUser=u;
        document.getElementById("loginPanel").style.display="none";
        document.getElementById("gamePanel").style.display="block";
        document.getElementById("userName").innerText=currentUser;
        updateWallet(); showAdminPanel();
        document.getElementById("loginMsg").innerText="";
    } else { document.getElementById("loginMsg").innerText="Sai t√™n ho·∫∑c m·∫≠t kh·∫©u!"; }
}
function register(){
    const u = document.getElementById("username").value;
    const p = document.getElementById("password").value;
    if(users[u]){document.getElementById("loginMsg").innerText="T√™n ƒë√£ t·ªìn t·∫°i!"; return;}
    users[u]={password:p, money:500000, logs:[], isAdmin:false};
    localStorage.setItem("users",JSON.stringify(users));
    document.getElementById("loginMsg").innerText="ƒêƒÉng k√Ω th√†nh c√¥ng!";
}
function logout(){ currentUser=null; document.getElementById("loginPanel").style.display="block"; document.getElementById("gamePanel").style.display="none"; selectedBetAmount=0; selectedChoice=null; }
function updateWallet(){ document.getElementById("money").innerText=users[currentUser].money.toLocaleString(); document.getElementById("selectedBet").innerText="C∆∞·ª£c: "+selectedBetAmount.toLocaleString()+" $ | Ch·ªçn: "+(selectedChoice||"-"); }
document.querySelectorAll(".chip").forEach(c=>c.addEventListener("click",()=>{ selectedBetAmount=parseInt(c.dataset.value); document.querySelectorAll(".chip").forEach(ch=>ch.classList.remove("selected")); c.classList.add("selected"); updateWallet(); }));
function chooseBet(choice){selectedChoice=choice;updateWallet();}
function rollDice(){
    if(!selectedChoice||selectedBetAmount<=0){alert("Ch·ªçn c∆∞·ª£c v√† chip tr∆∞·ªõc khi quay!");return;}
    if(users[currentUser].money<selectedBetAmount){alert("Kh√¥ng ƒë·ªß ti·ªÅn!");return;}
    let diceNums=[]; for(let i=0;i<3;i++){diceNums.push(Math.floor(Math.random()*6)+1);}
    diceNums.forEach((num,i)=>{let diceEl=document.getElementById("dice"+(i+1)); let animCount=0; let interval=setInterval(()=>{let r=Math.floor(Math.random()*6)+1; diceEl.innerText=r; animCount++; if(animCount>10){clearInterval(interval); diceEl.innerText=num;}},50);});
    let sum=diceNums.reduce((a,b)=>a+b,0);
    let result=sum>=11?"T√†i":"X·ªâu";
    if(Math.random()<winRate){result=selectedChoice;}
    let win=false; if(result===selectedChoice){win=true; users[currentUser].money+=selectedBetAmount;} else{users[currentUser].money-=selectedBetAmount;}
    updateWallet(); document.getElementById("result").innerText=`K·∫øt qu·∫£: ${result} | T·ªïng: ${sum}`; document.getElementById("result").className=win?"flash-win":"flash-lose";
    users[currentUser].logs.push({dice:diceNums,bet:selectedChoice,amount:selectedBetAmount,win:win}); localStorage.setItem("users",JSON.stringify(users));
}
function claimTask(){ if(taskCooldown){alert("ƒê·ª£i 30s l·∫ßn sau!"); return;} users[currentUser].money+=100000; taskCooldown=true; updateWallet(); setTimeout(()=>{taskCooldown=false;},30000); alert("Nh·∫≠n 100k nhi·ªám v·ª•!"); }
function enterCode(){ let code=prompt("Nh·∫≠p code:"); if(code && codeList[code]){users[currentUser].money+=codeList[code]; alert("Nh·∫≠n "+codeList[code].toLocaleString()+" $"); delete codeList[code]; updateWallet();} else alert("Code kh√¥ng h·ª£p l·ªá!"); }
function showAdminPanel(){ if(users[currentUser].isAdmin) document.getElementById("adminPanel").style.display="block"; else document.getElementById("adminPanel").style.display="none"; }
function adminSetWinRate(){ let val=parseFloat(document.getElementById("adminWinRate").value); if(val>=0 && val<=1){winRate=val; alert("C·∫≠p nh·∫≠t t·ªâ l·ªá th·∫Øng "+(val*100)+"%");} else alert("Nh·∫≠p s·ªë t·ª´ 0 ƒë·∫øn 1"); }
function adminCreateCode(){ let c=document.getElementById("adminCode").value; let amt=parseInt(document.getElementById("adminCodeAmount").value); if(c&&amt>0){codeList[c]=amt; alert("T·∫°o code "+c+" th√†nh c√¥ng!");} }
function adminAddMoney(){ let u=document.getElementById("adminTarget").value; let amt=parseInt(document.getElementById("adminAmount").value); if(users[u]&&amt>0){users[u].money+=amt; updateWallet(); alert("C·ªông ti·ªÅn th√†nh c√¥ng!");} }
function adminDeductMoney(){ let u=document.getElementById("adminTarget").value; let amt=parseInt(document.getElementById("adminAmount").value); if(users[u]&&amt>0){users[u].money-=amt; updateWallet(); alert("Tr·ª´ ti·ªÅn th√†nh c√¥ng!");} }
function adminViewLogs(){ document.getElementById("logArea").value=JSON.stringify(users[currentUser].logs,null,2); }
function showAllUsers(){ let txt=""; for(let u in users){ txt+=u+" | "+users[u].money.toLocaleString()+" $ | admin:"+users[u].isAdmin+"\n"; } document.getElementById("logArea").value=txt; }
</script>
</body>
</html>